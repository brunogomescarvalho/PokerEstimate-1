@model PokerEstimate.Models.Sala
@using System.Globalization
@{
    ViewData["Title"] = "Painel";
    var sala = ViewBag.Sala as PokerEstimate.Models.Sala;
    var nomeUsuario = ViewBag.NomeUsuario as string;
    var ehCriador = (bool)ViewBag.EhCriador;
}

<h1 style="text-align: center;">Sala de Estimativas</h1>
<p style="text-align: center;"><b>ID da Sala:</b> @sala.Id</p>
<p style="text-align: center;"><b>Criador:</b> @sala.Criador</p>

<h2 style="text-align: center;">Bem-vindo, @nomeUsuario!</h2>

<div style="text-align: center; margin: 5px 0;">
    <h3>Selecione sua estimativa:</h3>

    <!-- Botão para opção com imagem de xícara -->
    <form asp-action="RegistrarEstimativa" method="post" style="display: inline-block;">
        <input type="hidden" name="id" value="@sala.Id" />
        <input type="hidden" name="nome" value="@nomeUsuario" />
        <input type="hidden" name="ponto" value="☕" />
        <button type="submit" style="padding: 20px 30px; margin: 5px;">
            ☕ <!-- Aqui é o símbolo da xícara -->
        </button>
    </form>

    @for (double i = 0; i <= 3.5; i += (i < 0 ? 1 : 0.5))
    {
    <form asp-action="RegistrarEstimativa" method="post" style="display: inline-block;">
        <input type="hidden" name="id" value="@sala.Id" />
        <input type="hidden" name="nome" value="@nomeUsuario" />
        <input type="hidden" name="ponto" value="@i" />
        <button type="submit" style="padding: 20px 30px; margin: 5px;">@i</button>
    </form>
    }
    <form asp-action="RegistrarEstimativa" method="post" style="display: inline-block;">
        <input type="hidden" name="id" value="@sala.Id" />
        <input type="hidden" name="nome" value="@nomeUsuario" />
        <input type="hidden" name="ponto" value="?" />
        <button type="submit" style="padding: 20px 30px; margin: 5px;">?</button>
    </form>
</div>

<div style="text-align: center; margin: 5px 0;">
    @for (int i = 4; i <= 13; i++)
    {
        <form asp-action="RegistrarEstimativa" method="post" style="display: inline-block;">
            <input type="hidden" name="id" value="@sala.Id" />
            <input type="hidden" name="nome" value="@nomeUsuario" />
            <input type="hidden" name="ponto" value="@i" />
            <button type="submit" style="padding: 20px 30px; margin: 5px;">@i</button>
        </form>
    }
</div>

@if (ehCriador)
{
<div style="text-align: center; margin-top: 20px;">
    <form asp-action="DeletarVotos" method="post" style="display: inline-block;">
        <input type="hidden" name="id" value="@sala.Id" />
        <input type="hidden" name="nomeCriador" value="@sala.Criador" />
        <button type="submit" style="padding: 10px 20px; margin-right: 10px;">Limpar Votos</button>
    </form>

    <form asp-action="ExibirResultados" method="post" style="display: inline-block;">
        <input type="hidden" name="id" value="@sala.Id" />
        <input type="hidden" name="nomeCriador" value="@sala.Criador" />
        <button type="submit" style="padding: 10px 20px;">Exibir Resultados</button>
    </form>
</div>
}

<h3 style="text-align: center; margin-top: 20px;">Resultado</h3>
<table style="margin: 0 auto; border-collapse: collapse; width: 70%; border: 1px solid black;">
    <thead>
        <tr style="border-bottom: 2px solid black; background-color: #f2f2f2;">
            <th style="padding: 10px; text-align: left; width: 55%">Nome</th>
            <th style="padding: 10px; text-align: left; width: 45%">Story Point</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var usuario in sala.Usuarios)
    {
        <tr>
            <td style="padding: 10px;">@usuario.Nome</td>
            <td style="padding: 10px;">@(string.IsNullOrEmpty(usuario.Ponto) ? "Sem voto" : usuario.Ponto)</td>
        </tr>
    }
    </tbody>

</table>
